# Public API Report Viewer

A React-based web application to view and filter the Public API Report.

## Features

- **Summary Dashboard**: View key statistics about your public APIs
- **Interactive Table**: Browse all APIs with sortable columns
- **Column Customization**: Show/hide columns based on your needs
- **Horizontal Scrolling**: Smooth scrolling for wide tables
- **Endpoint Tooltips**: Hover over endpoints to see the complete URL
- **Swagger Downloads**: Download consolidated swagger specifications
- **Text Filtering**: Search and filter APIs by:
  - Tags
  - Operation ID
  - Endpoint URL
  - Description
  - Service name
  - HTTP Method
- **Responsive Design**: Works on desktop, tablet, and mobile devices
- **Color-coded badges**: Visual indicators for HTTP methods and portal status

## Installation

1. Navigate to the website directory:
```bash
cd website
```

2. Install dependencies:
```bash
npm install
```

## Usage

### Development Server

Run the development server (with automatic asset copying):
```bash
npm run dev
```

The application will be available at `http://localhost:3000`

The development mode automatically copies assets from:
- `output/swaggers/*.json` → `public/swaggers/` (excluding stats files)
- `output/reports/api-data.json` → `public/data/`

### Build for Production

**Important**: For production builds, assets must be pre-populated in the `public` folder before building.

The production build is configured with `base: '/public-apis/'` for GitHub Pages hosting at:
**https://intelliflo.github.io/public-apis/**

1. Generate the API report and data (**REQUIRED**):
```bash
cd tools
node generate-api-report.js
```

This creates:
- `output/reports/PUBLIC-API-REPORT.md`
- `output/reports/api-data.json` (**REQUIRED for website to function**)

2. Ensure swagger files exist in `output/swaggers/` (optional, for downloads)

3. Copy assets to public folder (manual or via script):
```bash
cd website

# Copy api-data.json (REQUIRED)
cp ../output/reports/api-data.json public/data/

# Copy swagger files (optional, for download functionality)
cp ../output/swaggers/consolidated-public-swagger*.json public/swaggers/
```

4. Build for production:
```bash
npm run build
```

The build output will be in the `dist` directory, ready for deployment to GitHub Pages.

**Note**: Production build (`npm run build`) does not copy assets - it expects them to already be in the `public` folder.

### Development Build

Build with automatic asset copying (useful for testing):
```bash
npm run build:dev
```

### Preview Production Build

Preview the production build locally:
```bash
npm run preview
```

## Configuration Files

The project uses separate Vite configurations for different environments:

- **`vite.config.js`**: Main router that delegates to dev or prod config based on mode
- **`vite.config.dev.js`**: Development configuration with asset copying plugin (base: '/public-apis/')
- **`vite.config.prod.js`**: Production configuration (simple build, no asset copying, base: '/public-apis/')

### Development Mode
- Automatically copies assets from `output/` to `public/`
- Gracefully handles missing directories
- Configured for GitHub Pages path (`base: '/public-apis/'`)
- Ideal for local development

### Production Mode
- Clean, simple build with no file operations
- Assumes assets are pre-populated in `public/` folder
- Configured for GitHub Pages deployment (`base: '/public-apis/'`)
- Ideal for CI/CD pipelines

## Data Source

The application requires two types of data:

1. **API Data**: `/public/data/api-data.json` (**REQUIRED**)
   - Generated by `tools/generate-api-report.js`
   - Contains API metadata and summary statistics
   - **Must be present** for the website to function
   - Required for hosted report at: https://intelliflo.github.io/public-apis/

2. **Swagger Files**: `/public/swaggers/*.json`
   - Consolidated swagger specifications
   - Used for download functionality
   - Stats files (e.g., `*-stats.json`) are excluded
   - Generated from the API consolidation process

## Project Structure

```
Public-APIs/                       # Root repository
├── website/                       # Website application (at root level)
│   ├── public/
│   │   ├── data/
│   │   │   └── api-data.json      # API data (copied from ../output/reports)
│   │   └── swaggers/
│   │       └── *.json             # Swagger files (copied from ../output/swaggers)
│   ├── src/
│   │   ├── components/
│   │   │   ├── ApiTable.jsx       # Main API table with column customization
│   │   │   ├── ApiTable.css
│   │   │   ├── DownloadSwagger.jsx    # Swagger download component
│   │   │   ├── DownloadSwagger.css
│   │   │   ├── FilterBar.jsx      # Search/filter component
│   │   │   ├── FilterBar.css
│   │   │   ├── Summary.jsx        # Summary statistics
│   │   │   └── Summary.css
│   │   ├── App.jsx                # Main app component
│   │   ├── App.css
│   │   ├── main.jsx               # Entry point
│   │   └── index.css              # Global styles
│   ├── index.html
│   ├── package.json
│   ├── vite.config.js             # Main config (routes to dev/prod)
│   ├── vite.config.dev.js         # Dev config with asset copying (../output)
│   ├── vite.config.prod.js        # Production config (simple build)
│   └── README.md
├── output/                        # Generated files
│   ├── reports/
│   │   └── api-data.json          # Source for website data
│   └── swaggers/
│       └── *.json                 # Source for swagger downloads
├── tools/                         # Build tools
│   └── generate-api-report.js     # Generates api-data.json
└── ... (other project files)
```

## Available Scripts

| Command | Description |
|---------|-------------|
| `npm run dev` | Start development server with automatic asset copying |
| `npm run build` | Production build (requires assets in `public/` folder) |
| `npm run build:dev` | Development build with automatic asset copying |
| `npm run preview` | Preview production build locally |

## Technologies

- **React 18**: UI framework
- **Vite**: Build tool and dev server
- **CSS3**: Styling and responsive design
- **LocalStorage**: Persist column visibility preferences

## Browser Support

Supports all modern browsers:
- Chrome (latest)
- Firefox (latest)
- Safari (latest)
- Edge (latest)

## GitHub Pages Deployment

The website is hosted at: **https://intelliflo.github.io/public-apis/**

### Prerequisites
- `api-data.json` must be generated and copied to `public/data/` before building
- Swagger files should be copied to `public/swaggers/` for download functionality

### Deployment Steps
1. Generate the API data:
   ```bash
   cd tools
   node generate-api-report.js
   ```

2. Copy required assets:
   ```bash
   cd website

   # Create directories if needed
   mkdir -p public/data public/swaggers

   # Copy api-data.json (REQUIRED)
   cp ../output/reports/api-data.json public/data/

   # Copy swagger files (optional)
   cp ../output/swaggers/consolidated-public-swagger*.json public/swaggers/
   ```

3. Build for production:
   ```bash
   npm run build
   ```

4. Deploy the `dist/` folder to GitHub Pages (gh-pages branch or via GitHub Actions)

## Workflow Summary

### For Local Development
1. `npm install` - Install dependencies
2. `npm run dev` - Start dev server (assets copied automatically)
3. Open `http://localhost:3000/public-apis/`

### For Production Deployment
1. Generate assets (run `generate-api-report.js`)
2. Copy `api-data.json` to `public/data/` (**REQUIRED**)
3. Copy swagger files to `public/swaggers/` (optional)
4. Build: `npm run build`
5. Deploy `dist/` folder to GitHub Pages
